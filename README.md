# capture-courses

## 安装
在 [USTC 在线视频平台-直录播-录播课程](https://v.ustc.edu.cn/capture-course/)标签页打开浏览器开发者工具，使用 [Edge 的本地覆写](https://learn.microsoft.com/zh-cn/microsoft-edge/devtools-guide-chromium/javascript/overrides)或 [Chrome 的本地覆写](https://developer.chrome.com/docs/devtools/overrides?hl=zh-cn)，将覆写文件夹设为本仓库根目录下的 overrides，然后即可访问所有已录制的课程。设置时有以下几点注意事项：
1. 设置覆写文件夹时应保持本仓库原本的目录结构：  
   <pre>
   overrides（设置为覆写文件夹）   
   └─v.ustc.edu.cn
       └─assets
           │   capture*.js
           │   captureCourses*.js
   </pre>
2. 设置完成后，覆写文件夹的位置不可移动，否则需要在开发者工具内重新设置路径。本仓库更新后，直接将覆写文件夹内的文件更新即可。
3. 本地覆写需要开发者工具**始终处于打开状态**，打开以后，刷新网页即可生效。成功观看一个录播视频后，在后续不刷新网页的情况下，可以关闭开发者工具。
4. 在观看录播视频前，网站需要通过统一身份认证登录。

## 搜索
使用本工具后，**仅支持完整课程号搜索，如MATH1006.01**（在[USTC 教务处-全校开课查询](https://catalog.ustc.edu.cn/query/lesson)等平台可以搜索到课程号）。网站默认搜索本学期课程，在搜索框中输入如下格式中的任意一个，即可搜索往期课程（最早支持22春）。
- MATH1006.01 23秋
- MATH1006.01-23秋
- MATH1006.01/23秋
- 23秋 MATH1006.01
- 23秋-MATH1006.01
- 23秋/MATH1006.01

## 下载
进入课程目录页后，原本的观看回放改为下载录播课，点击按钮即可下载。如果需要在线播放，点击按钮以外的其他区域即可。

## 声明
本工具仅供校内学生学习使用，请勿将视频平台的内容私自上传至公共平台，这可能对任课老师造成非常严重的负面影响。教师手动授权后，无需使用本工具即可访问录播课程，具体方法如下（助教推荐使用）：
   1. 教师登录 https://home.v.ustc.edu.cn - 进入"我的课程"（左栏） - 进入具体课程 - 点击"发布"
   2. 学生登录 https://home.v.ustc.edu.cn - 进入"我的课程"（左栏） - 进入具体课程 - 在"录播教材"中查看往期课程

由于一些老师反馈/课程内容流传到公共平台的原因，录课网站每半年左右就会做一次更新，导致工具不可用。虽然目前为止我们仍有应对手段，但是录课网站做一次根本性的修复并不难，请勿完全依赖本工具和录课网站，重要的内容请提前下载备份。

## 支持我们
目前，几乎所有研究生/本研同堂课程以及部分本科生课程会出现课程内容为空/不全/声音缺失/时长不完整的情况，我们对这种情况无能为力。这些问题与课程类别和教室的自动录课设置存在很大的关系。以下是一些可能的解决方法：
- 向老师申请录课权限：以更正义的手段获取录课资源，但似乎仍无法解决教室硬件未录课的问题。
- 右键将视频另存至本地：如果同时存在电脑录屏和教室录屏，且两视频时长不一致，录课平台可能会选择短的时长作为总时长。单独下载两个视频文件可以获得原始的完整内容。
- 在课前打开教室电脑，并在课程结束后关闭：部分教室的自动录课设置要求电脑处于开机状态，如果提前关机，录课可能会提前终止。如果始终不开机而一直使用板书，也可能成功录制。

由于作者现在即将脱离本科生阶段，将不再持续使用本工具，如果对于上面的问题有更新的认识和更合适的解决方案，欢迎在 Issues 处提出。